<ApplicationBase x:Class="H.App.VisionMaster.App"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
                 xmlns:h="https://github.com/HeBianGu"
                 xmlns:local="clr-namespace:H.App.VisionMaster">
    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <FontSizeTheme Type="{x:Static FontSizeThemeType.Default}" />
                <LayoutTheme Type="{x:Static LayoutThemeType.Default}" />
                <ColorTheme Type="{x:Static ColorThemeType.Dark}" />
                <ResourceDictionary Source="pack://application:,,,/H.Styles.Default;component/ConciseControls.xaml" />
            </ResourceDictionary.MergedDictionaries>

            <DataTemplate x:Key="S.VisionOpenCVDiagramData.Info"
                          DataType="{x:Type local:VisionOpenCVDiagramData}">
                <DockPanel>
                    <Expander DockPanel.Dock="Bottom"
                              Style="{DynamicResource {x:Static ExpanderKeys.ToggleRight}}">
                        <Expander.Header>
                            <DockPanel>
                                <TextBlock>
                                    <Run Text="图像源 " />
                                </TextBlock>
                                <TextBlock>
                                    <b:Interaction.Behaviors>
                                        <h:TextBlockIndexOfBebavior DefaultFromValue="1"
                                                                    Item="{Binding SelectedImageFile}"
                                                                    Source="{Binding ImageFiles}" />
                                    </b:Interaction.Behaviors>
                                </TextBlock>
                            </DockPanel>
                        </Expander.Header>
                        <Cattach.CaptionRightTemplate>
                            <ControlTemplate>
                                <DockPanel HorizontalAlignment="Right">
                                    <FontIconButton Content="&#xE74D;"
                                                    DockPanel.Dock="Right" />
                                    <FontIconButton Content="&#xED25;"
                                                    DockPanel.Dock="Right" />
                                    <FontIconButton Content="&#xF12B;"
                                                    DockPanel.Dock="Right" />
                                    <FontIconButton Content="&#xF407;"
                                                    DockPanel.Dock="Right" />
                                    <FontIconButton Content="&#xF463;"
                                                    DockPanel.Dock="Right" />
                                    <FontIconButton Content="&#xF61B;"
                                                    DockPanel.Dock="Right" />
                                    <FontIconButton Content="&#xF618;"
                                                    DockPanel.Dock="Right" />
                                    <FontIconButton Content="&#xE710;"
                                                    DockPanel.Dock="Right" />
                                    <FontIconButton Content="&#xE312;"
                                                    DockPanel.Dock="Right" />
                                    <FontIconButton Content="&#xE9A6;"
                                                    DockPanel.Dock="Right" />
                                    <FontIconButton Content="&#xED14;"
                                                    DockPanel.Dock="Right" />
                                </DockPanel>
                            </ControlTemplate>
                        </Cattach.CaptionRightTemplate>
                        <ListBox Height="80"
                                 Cattach.ItemHeight="Auto"
                                 ItemsSource="{Binding ImageFiles}"
                                 SelectedItem="{Binding SelectedImageFile}"
                                 Visibility="{Binding ElementName=tb_s, Path=IsChecked, Converter={x:Static Converter.GetTrueToVisible}}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <WrapPanel />
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Width="75"
                                            Height="75">
                                        <Image Source="{Binding}" />
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ListBox>
                    </Expander>
                    <TabControl Cattach.CaptionHorizontalAlignment="Center"
                                ItemContainerStyle="{DynamicResource {x:Static TabItemKeys.Line}}"
                                SelectedIndex="{Binding SelectedImageTabIndex}">
                        <TabItem MinWidth="100"
                                 Header="图像">
                            <Grid>
                                <h:Zoombox x:Name="zoomview"
                                           Background="{DynamicResource {x:Static BrushKeys.Tile25}}"
                                           DragModifiers=""
                                           Focusable="True"
                                           IsTabStop="True"
                                           MinScale="0.2"
                                           NavigateOnPreview="False"
                                           RelativeZoomModifiers=""
                                           ViewStackIndex="0"
                                           ZoomOn="Content">
                                    <b:Interaction.Behaviors>
                                        <h:ZoomBoxFitOnLoadedBehavior />
                                        <h:ZoomBoxFitOnSizeChangedBehavior />
                                    </b:Interaction.Behaviors>
                                    <h:Zoombox.ViewStack>
                                        <!--<h:ZoomboxView>0 0 1000 1000</h:ZoomboxView>-->
                                        <h:ZoomboxView>Fit</h:ZoomboxView>
                                        <!--<h:ZoomboxView>Fill</h:ZoomboxView>-->
                                    </h:Zoombox.ViewStack>
                                    <b:Interaction.Triggers>
                                        <h:MouseTrigger ClickCount="2"
                                                        Mode="Right"
                                                        MouseButton="Left"
                                                        UseHandle="False">
                                            <!--<b:InvokeCommandAction Command="{Binding Source={x:Static h:IocProject.Instance}, Path=Current.File.NextCommand}" />-->
                                            <h:CallMethodActionEx MethodName="FitToBounds"
                                                                  TargetObject="{Binding ElementName=zoomview}" />
                                        </h:MouseTrigger>
                                        <h:MouseTrigger ClickCount="2"
                                                        Mode="Left"
                                                        MouseButton="Left"
                                                        UseHandle="False">
                                            <!--<b:InvokeCommandAction Command="{Binding Source={x:Static h:IocProject.Instance}, Path=Current.File.PreviousCommand}" />-->
                                            <h:CallMethodActionEx MethodName="FitToBounds"
                                                                  TargetObject="{Binding ElementName=zoomview}" />
                                        </h:MouseTrigger>
                                    </b:Interaction.Triggers>
                                    <Image Source="{Binding SelectedImageFile, NotifyOnSourceUpdated=True, NotifyOnTargetUpdated=True}">
                                        <b:Interaction.Triggers>
                                            <b:EventTrigger EventName="SourceUpdated">
                                                <h:CallMethodActionEx MethodName="FitToBounds"
                                                                      TargetObject="{Binding ElementName=zoomview}" />
                                            </b:EventTrigger>
                                            <b:EventTrigger EventName="TargetUpdated">
                                                <h:CallMethodActionEx MethodName="FitToBounds"
                                                                      TargetObject="{Binding ElementName=zoomview}" />
                                            </b:EventTrigger>
                                        </b:Interaction.Triggers>
                                    </Image>
                                </h:Zoombox>
                                <Border Height="35"
                                        VerticalAlignment="Bottom">
                                    <Border.Background>
                                        <SolidColorBrush Opacity="0.3"
                                                         Color="Black" />
                                    </Border.Background>
                                    <DockPanel VerticalAlignment="Center"
                                               LastChildFill="False"
                                               TextBlock.Foreground="White">
                                        <TextBlock Margin="5,0"
                                                   Text="111.bmp" />
                                        <TextBlock Margin="5,0"
                                                   DockPanel.Dock="Right">
                                            <Run Text="3840*2748" />
                                            <Run Text="|" />
                                            <Run Text="3840*2748" />
                                            <Run Text="|" />
                                            <Run Text="3840*2748" />
                                        </TextBlock>
                                    </DockPanel>
                                </Border>
                            </Grid>
                        </TabItem>
                        <TabItem MinWidth="100"
                                 HorizontalContentAlignment="Center"
                                 Header="模块结果">
                            <h:Zoombox x:Name="zoomview1"
                                       Background="{DynamicResource {x:Static BrushKeys.Tile25}}"
                                       DragModifiers=""
                                       Focusable="True"
                                       IsTabStop="True"
                                       MinScale="0.2"
                                       NavigateOnPreview="False"
                                       RelativeZoomModifiers=""
                                       ViewStackIndex="0"
                                       ZoomOn="Content">
                                <b:Interaction.Behaviors>
                                    <h:ZoomBoxFitOnLoadedBehavior />
                                    <h:ZoomBoxFitOnSizeChangedBehavior />
                                </b:Interaction.Behaviors>
                                <h:Zoombox.ViewStack>
                                    <h:ZoomboxView>Fit</h:ZoomboxView>
                                </h:Zoombox.ViewStack>
                                <b:Interaction.Triggers>
                                    <h:MouseTrigger ClickCount="2"
                                                    Mode="Right"
                                                    MouseButton="Left"
                                                    UseHandle="False">
                                        <h:CallMethodActionEx MethodName="FitToBounds"
                                                              TargetObject="{Binding ElementName=zoomview1}" />
                                    </h:MouseTrigger>
                                    <h:MouseTrigger ClickCount="2"
                                                    Mode="Left"
                                                    MouseButton="Left"
                                                    UseHandle="False">
                                        <h:CallMethodActionEx MethodName="FitToBounds"
                                                              TargetObject="{Binding ElementName=zoomview1}" />
                                    </h:MouseTrigger>
                                </b:Interaction.Triggers>
                                <Image Source="{Binding NodeImageSource, NotifyOnSourceUpdated=True, NotifyOnTargetUpdated=True}">
                                    <b:Interaction.Triggers>
                                        <b:EventTrigger EventName="SourceUpdated">
                                            <h:CallMethodActionEx MethodName="FitToBounds"
                                                                  TargetObject="{Binding ElementName=zoomview1}" />
                                        </b:EventTrigger>
                                        <b:EventTrigger EventName="TargetUpdated">
                                            <h:CallMethodActionEx MethodName="FitToBounds"
                                                                  TargetObject="{Binding ElementName=zoomview1}" />
                                        </b:EventTrigger>
                                    </b:Interaction.Triggers>
                                </Image>
                            </h:Zoombox>
                        </TabItem>
                    </TabControl>
                </DockPanel>
            </DataTemplate>
        </ResourceDictionary>

    </Application.Resources>
</ApplicationBase>
